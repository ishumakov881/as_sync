/*
===============================================================================
UNIVERSAL VIEWMODEL + JETPACK COMPOSE GUIDELINE
Clean Architecture ¬∑ MVVM ¬∑ StateFlow
===============================================================================

–¶–ï–õ–¨
-----
–ü—Ä–∏–≤–æ–¥–∏—Ç—å –õ–Æ–ë–£–Æ ViewModel (Login, Profile, List, Details –∏ —Ç.–¥.)
–∫ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∏ UI-–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

-------------------------------------------------------------------------------
‚ùå –ó–ê–ü–†–ï–©–ï–ù–û (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò)
-------------------------------------------------------------------------------

‚ùå UI —á–∏—Ç–∞–µ—Ç –ø–æ–ª—è ViewModel –Ω–∞–ø—Ä—è–º—É—é
    viewModel.errorMsg
    viewModel.isLoading
–ü—Ä–∏—á–∏–Ω–∞:
- —ç—Ç–æ –Ω–µ state
- Compose –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
- –≤–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏ –∏ –±–∞–≥–∏ –ø—Ä–∏ recomposition

‚ùå Side-effects –≤ —Ç–µ–ª–µ Composable
    Toast.makeText(...)
    navController.navigate(...)
–ü—Ä–∏—á–∏–Ω–∞:
- side-effect –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π recomposition

‚ùå mutableStateOf –≤–Ω—É—Ç—Ä–∏ ViewModel
–ü—Ä–∏—á–∏–Ω–∞:
- ViewModel —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ–π –æ—Ç Compose

‚ùå String –∫–∞–∫ –æ—à–∏–±–∫–∞ –≤ ViewModel
    errorMsg: String?
–ü—Ä–∏—á–∏–Ω–∞:
- ViewModel –Ω–µ –¥–æ–ª–∂–Ω–∞ –∑–Ω–∞—Ç—å, —á—Ç–æ –∏ –∫–∞–∫ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

‚ùå –õ—é–±–æ–π UI-–∫–æ–¥ –≤–æ ViewModel
    Context
    Toast / Snackbar
    stringResource
    MaterialTheme
    println –¥–ª—è UI-—Å–æ–±—ã—Ç–∏–π

-------------------------------------------------------------------------------
‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ü–†–ê–í–ò–õ–ê
-------------------------------------------------------------------------------

1Ô∏è‚É£ –ï–î–ò–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´ ‚Äî UiState

ViewModel –û–ë–Ø–ó–ê–ù–ê –∏–º–µ—Ç—å:
    val uiState: StateFlow<UiState>

UI –û–ë–Ø–ó–ê–ù —á–∏—Ç–∞—Ç—å –¢–û–õ–¨–ö–û –µ–≥–æ:
    val state by viewModel.uiState.collectAsState()

-------------------------------------------------------------------------------

2Ô∏è‚É£ –í–°–Å –°–û–°–¢–û–Ø–ù–ò–ï –≠–ö–†–ê–ù–ê ‚Äî –í UiState

–ü—Ä–∏–º–µ—Ä:
    data class UiState(
        val isLoading: Boolean = false,
        val error: UiError? = null
    )

‚ùå –ù–∏–∫–∞–∫–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –≤ ViewModel

-------------------------------------------------------------------------------

3Ô∏è‚É£ –û–®–ò–ë–ö–ò ‚Äî –¢–û–õ–¨–ö–û –¢–ò–ü–ò–ó–ò–†–û–í–ê–ù–ù–´–ï

–†–∞–∑—Ä–µ—à–µ–Ω–æ:
    sealed interface UiError

–ó–∞–ø—Ä–µ—â–µ–Ω–æ:
    String
    message –≤ ViewModel

-------------------------------------------------------------------------------

4Ô∏è‚É£ ViewModel –ù–ï –§–û–†–ú–ò–†–£–ï–¢ –¢–ï–ö–°–¢

‚ùå –ù–µ–ª—å–∑—è:
    errorMsg = "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å"

‚úÖ –ú–æ–∂–Ω–æ:
    error = UiError.Unauthorized

UI —Å–∞–º —Ä–µ—à–∞–µ—Ç, –ö–ê–ö —ç—Ç–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å

-------------------------------------------------------------------------------

5Ô∏è‚É£ try/catch ‚Äî –¢–û–õ–¨–ö–û –í ViewModel

- UI –ù–ò–ö–û–ì–î–ê –Ω–µ –ª–æ–≤–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –í—Å–µ Throwable –º–∞–ø–ø—è—Ç—Å—è –≤ UiError

–ü—Ä–∏–Ω—Ü–∏–ø:
    Throwable ‚Üí UiError ‚Üí UiState ‚Üí UI

-------------------------------------------------------------------------------

6Ô∏è‚É£ –û–ë–ù–û–í–õ–ï–ù–ò–ï STATE ‚Äî –¢–û–õ–¨–ö–û –ß–ï–†–ï–ó copy

‚ùå –ù–µ–ª—å–∑—è:
    isLoading = true
    errorMsg = null

‚úÖ –ú–æ–∂–Ω–æ:
    _uiState.update {
        it.copy(isLoading = true, error = null)
    }

-------------------------------------------------------------------------------

7Ô∏è‚É£ SIDE-EFFECTS ‚Äî –¢–û–õ–¨–ö–û –ß–ï–†–ï–ó LaunchedEffect

–†–∞–∑—Ä–µ—à–µ–Ω–æ:
    LaunchedEffect(state.error) {
        // toast / navigation
    }

–ó–∞–ø—Ä–µ—â–µ–Ω–æ:
    –≤—ã–∑—ã–≤–∞—Ç—å side-effect –∏–∑ —Ç–µ–ª–∞ Composable

-------------------------------------------------------------------------------
üß™ CHECKLIST (–ü–†–û–í–ï–†–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò)
-------------------------------------------------------------------------------

ViewModel —Å—á–∏—Ç–∞–µ—Ç—Å—è –ü–†–ê–í–ò–õ–¨–ù–û–ô, –µ—Å–ª–∏:

[ ] UI –Ω–µ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø–æ–ª—è–º ViewModel –Ω–∞–ø—Ä—è–º—É—é
[ ] –ï—Å—Ç—å —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω UiState
[ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è StateFlow
[ ] –ù–µ—Ç mutableStateOf –≤ ViewModel
[ ] –û—à–∏–±–∫–∏ ‚Äî sealed class/interface
[ ] –ù–µ—Ç UI-–∫–æ–¥–∞ –≤–æ ViewModel
[ ] Side-effects –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ Composable body

-------------------------------------------------------------------------------
üß† –ö–û–†–û–¢–ö–ê–Ø –§–û–†–ú–£–õ–ê
-------------------------------------------------------------------------------

State      ‚Üí UiState (StateFlow)
UI         ‚Üí —á–∏—Ç–∞–µ—Ç state
Effects    ‚Üí LaunchedEffect
ViewModel ‚Üí –±–µ–∑ UI

===============================================================================
–ö–û–ù–ï–¶ GUIDELINE
===============================================================================
*/
